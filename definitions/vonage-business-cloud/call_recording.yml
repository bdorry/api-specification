---
openapi: 3.0.0
info:
  version: "1.0"
  title: Call Recording API
  description: The Vonage Business Cloud Call Recording API enables you to manage your company and on-demand call recordings.
  contact:
    name: "Vonage Business Cloud Support"
    url: "https://businesssupport.vonage.com/contactus"
  termsOfService: "https://www.vonage.com/business/legal-policy-center/business-cloud/tos"
tags:
  - name: company call recording
    description: 'Company Call Recording lets administrators schedule call recording rules and recording parameters for your entire office.'
  - name: on-demand call recording
    description: 'On-Demand Call Recording lets employees decide when to record calls. It’s a particularly useful phone recording system for businesses when you need to verify the details of a conversation or when it’s essential that you capture accurate notes'
  - name: export job
    description: 'Export jobs let users download recordings in bulk based on search criteria. Export jobs are initiated from the corresponding company and on-demand call recording export endpoints.'
  - name: download
    description: 'Download audio files for company and on-demand call recordings.'
paths:
  "/api/accounts/{account_id}/company_call_recordings":
    get:
      operationId: getCCRecordings
      summary: Get company call recordings
      description: Get company call recordings for an account
      tags:
        - company call recording
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountID"
        - $ref: "#/components/parameters/Extension"
        - $ref: "#/components/parameters/StartLte"
        - $ref: "#/components/parameters/StartGte"
        - $ref: "#/components/parameters/CallDirection"
        - $ref: "#/components/parameters/CallerID"
        - $ref: "#/components/parameters/Cnam"
        - $ref: "#/components/parameters/Dnis"
        - $ref: "#/components/parameters/DurationLte"
        - $ref: "#/components/parameters/DurationGte"
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RecordingsHalResponse"
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
    delete:
      operationId: deleteCCRecordings
      summary: Delete multiple company call recordings
      description: Delete multiple company call recordings for an account
      tags:
        - company call recording
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountID"
      requestBody:
        required: true
        content:
          application/json:
            schema: 
              $ref: "#/components/schemas/Filters"
      responses:
        204:
          description: No Content
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
  
  "/api/accounts/{account_id}/company_call_recordings/{recording_id}":
    get:
      operationId: getCCRecording
      summary: Get company call recording
      description: Get a single company call recording for an account
      tags:
        - company call recording
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountID"
        - $ref: "#/components/parameters/RecordingID"
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RecordingHalResponse"
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
    delete:
      operationId: deleteCCRecording
      summary: Delete company call recording
      description: Delete a single company call recording for an account
      tags:
        - company call recording
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountID"
        - $ref: "#/components/parameters/RecordingID"
      responses:
        204:
          description: No Content
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
  "/api/accounts/{account_id}/company_call_recordings/export":
    post:
      operationId: createCCRExportJob
      summary: Create a company call recording export job
      description: Create a company call recording export job for an account
      tags:
        - company call recording
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountID"
        - $ref: "#/components/parameters/Extension"
      requestBody:
        required: true
        content:
          application/json:
            schema: 
              $ref: "#/components/schemas/Filters"
      responses:
        201:
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateExportJobHalResponse"
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
  "/api/accounts/{account_id}/users/{user_id}/call_recordings":
    get:
      operationId: getODCRecordings
      summary: Get on-demand call recordings
      description: Get on-demand call recordings for an account user
      tags:
        - on-demand call recording
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountID"
        - $ref: "#/components/parameters/UserID"
        - $ref: "#/components/parameters/Extension"
        - $ref: "#/components/parameters/StartLte"
        - $ref: "#/components/parameters/StartGte"
        - $ref: "#/components/parameters/CallDirection"
        - $ref: "#/components/parameters/CallerID"
        - $ref: "#/components/parameters/Cnam"
        - $ref: "#/components/parameters/Dnis"
        - $ref: "#/components/parameters/DurationLte"
        - $ref: "#/components/parameters/DurationGte"
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RecordingsHalResponse"
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
    delete:
      operationId: DeleteODCRecordings
      summary: Delete multiple on-demand call recordings
      description: Delete multiple on-demand call recordings for an account user
      tags:
        - on-demand call recording
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountID"
        - $ref: "#/components/parameters/UserID"
      requestBody:
        required: true
        content:
          application/json:
            schema: 
              $ref: "#/components/schemas/Filters"
      responses:
        204:
          description: No Content
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
  "/api/accounts/{account_id}/users/{user_id}/call_recordings/{recording_id}":
    get:
      operationId: getODCRecording
      summary: Get on-demand call recording
      description: Get a single on-demand call recording for an account user
      tags:
        - on-demand call recording
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountID"
        - $ref: "#/components/parameters/UserID"
        - $ref: "#/components/parameters/RecordingID"
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/RecordingHalResponse"
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
    delete:
      operationId: deleteODCRecording
      summary: Delete on-demand call recording
      description: Delete a single on-demand call recording for an account user
      tags:
        - on-demand call recording
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountID"
        - $ref: "#/components/parameters/UserID"
        - $ref: "#/components/parameters/RecordingID"
      responses:
        204:
          description: No Content
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
  "/api/accounts/{account_id}/users/{user_id}/call_recordings/export":
    post:
      operationId: createODCRExportJob
      summary: Create an on-demand call recording export job
      description: Create an on-demand call recording export job for an account user
      tags:
        - on-demand call recording
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountID"
        - $ref: "#/components/parameters/UserID"
      requestBody:
        required: true
        content:
          application/json:
            schema: 
              $ref: "#/components/schemas/Filters"
      responses:
        201:
          description: Created
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/CreateExportJobHalResponse"
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
  "/api/accounts/{account_id}/users/{user_id}/call_recordings/jobs":
    get:
      operationId: getCCRExportJobs
      summary: Get call recording export jobs
      description: Get call recording export jobs for an account user
      tags:
        - export job
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountID"
        - $ref: "#/components/parameters/UserID"
        - $ref: "#/components/parameters/Status"
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExportJobsHalResponse"
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
  "/api/accounts/{account_id}/users/{user_id}/call_recordings/jobs/{job_id}":
    get:
      operationId: getCCRExportJob
      summary: Get call recording export job
      description: Get a single call recording export job for an account user
      tags:
        - export job
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/AccountID"
        - $ref: "#/components/parameters/UserID"
        - $ref: "#/components/parameters/JobID"
      responses:
        200:
          description: OK
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/ExportJobHalResponse"
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
  "/api/audio/recording/{recording_id}":
    get:
      operationId: downloadCCR
      summary: Download call recording
      description: Download a call recording audio file
      tags:
        - download
      security:
        - bearerAuth: []
      parameters:
        - $ref: "#/components/parameters/RecordingID"
      responses:
        200:
          description: OK
        401:
          description: Unauthorized
        403:
          description: Forbidden
        404:
          description: Not Found
servers:
  - url: https://api.vonage.com/t/vbc.prod/call_recording
components:
  parameters:
    AccountID:
      name: account_id
      in: path
      required: true
      schema:
        type: string
      description: The account ID
      example: 123456
    UserID:
      name: user_id
      in: path
      description: The user ID
      required: true
      example: 123456
      schema:
        type: string
    JobID:
      name: job_id
      in: path
      description: job_id
      required: true
      example: 7a688e12-99ee-4816-8385-b21b90583838
      schema:
        type: string
    RecordingID:
      name: recording_id
      in: path
      description: The recording ID
      required: true
      example: 123456
      schema:
        type: string
    Extension:
      name: extension
      in: query
      description: Filter records by extension number
      required: false
      example: 999
      schema:
        type: string
    StartLte:
      name: start:lte
      in: query
      description: Filter records by start date (less than or equal to)
      example: 2019-01-01 00:00:00
      required: false
      schema:
        type: string
    StartGte:
      name: start:gte
      in: query
      description: Filter records by start date (greater than or equal to)
      example: 2019-01-01 00:00:00
      required: false
      schema:
        type: string
    CallDirection:
      name: call_direction
      in: query
      description: Filter records by call direction
      example: INBOUND
      required: false
      schema:
        type: string
        enum:
          - INBOUND
          - OUTBOUND
          - INTRA_PBX
    CallerID:
      name: caller_id
      in: query
      description: Filter records by Caller ID
      required: false
      schema:
        type: string
    Cnam:
      name: cnam
      in: query
      description: Filter records by CNAM
      required: false
      schema:
        type: string
    Dnis:
      name: dnis
      in: query
      description: Filter records by DNIS
      required: false
      schema:
        type: string
    DurationLte:
      name: duration:lte
      in: query
      description: Filter records by duration in milliseconds (less than or equal to)
      required: false
      schema:
        type: integer
    DurationGte:
      name: duration:gte
      in: query
      description: Filter records by duration in milliseconds (greater than or equal to)
      required: false
      schema:
        type: integer
    Status:
      name: status
      in: query
      description: Filter records by recording status
      required: false
      schema:
        type: string
  schemas:
    Pagination:
      type: object
      properties:
        first:
          $ref: "#/components/schemas/FirstHref"
        prev:
          $ref: "#/components/schemas/PrevHref"
        self:
          $ref: "#/components/schemas/SelfHref"
        next:
          $ref: "#/components/schemas/NextHref"
        last:
          $ref: "#/components/schemas/LastHref"
    PaginationSingle:
      type: object
      properties:
        self:
          $ref: "#/components/schemas/SelfHref"
    FirstHref:
      type: object
      properties:
        href:
          type: string
          description: URL to the first page of records
    PrevHref:
      type: object
      properties:
        href:
          type: string
          description: URL to the previous page of records
    SelfHref:
      type: object
      properties:
        href:
          type: string
          description: URL to the current page of records
    NextHref:
      type: object
      properties:
        href:
          type: string
          description: URL to the next page of records
    LastHref:
      type: object
      properties:
        href:
          type: string
          description: URL to the last page of records
    Recording:
      type: object
      properties:
        _links:
          $ref: "#/components/schemas/PaginationSingle"
        call_direction:
          type: string
          description: Direction of the recorded call
          example: "INBOUND"
        caller_id:
          type: string
          description: Caller ID of the caller of the recorded call
        cnam:
          type: string
          description: CNAM of the caller of the recorded call
        dnis:
          type: string
          description: DNIS of the caller of the recorded call
        duration:
          type: integer
          description: Duration of the recorded call in milliseconds
          example: 60000
        end:
          type: string
          format: date-time
          description: End time of the recorded call
          example: "2019-01-01T00:00:00+0000"
        extensions:
          type: array
          items:
            type: string
          description: Extensions associated with the call recording
          example: [999]
        file_name:
          type: string
          description: File name of the call recording
          example: "730048.11826465111463122315701.95a7584be856e34a582025d420c20d9d.1463122442148.mp3"
        file_size_in_bytes:
          type: integer
          description: File size in bytes of the call recording
          example: 100000
        id:
          type: integer
          description: Unique identifier of the call recording
          example: 123456
        rule_ids:
          type: array
          items:
            type: integer
        start:
          type: string
          format: date-time
          description: Start time of the recorded call
          example: "2019-01-01T00:00:00+0000"
    RecordingHalResponse:
      $ref: "#/components/schemas/Recording"
    RecordingsHalResponse:
      type: object
      properties:
        _embedded:
          properties:
            recordings:
              type: array
              items:
                $ref: "#/components/schemas/Recording"
          description: A list of recording objects
        _links:
          $ref: "#/components/schemas/Pagination"
        page:
          type: integer
        page_size:
          type: integer
        total_items:
          type: integer
        total_pages:
          type: integer
    CreateExportJob:
      type: object
      properties:
        job_id:
          type: array
          items:
            type: string
          description: Unique identifier of the created export jobs
          example:
            - afa725fb-d418-4eaf-b3f9-0e66396fafdc
    CreateExportJobHalResponse:
      type: object
      properties:
        _embedded:
          type: object
          properties:
            jobs:
              $ref: "#/components/schemas/CreateExportJob"
        _links:
          $ref: "#/components/schemas/PaginationSingle"
        page:
          type: integer
        page_size:
          type: integer
        total_items:
          type: integer
        total_pages:
          type: integer
    ExportJob:
      type: object
      properties:
        _links:
          $ref: "#/components/schemas/PaginationSingle"
        download_url:
          type: string
          description: URL to download the completed export job
        files_completed:
          type: integer
          description: Number of files completed by the export job
        files_total:
          type: integer
          description: Number of files included in the export job
          example: 10
        id:
          type: string
          description: Unique identifier of the export job
          example: afa725fb-d418-4eaf-b3f9-0e66396fafdc
        status:
          type: string
          description: Status of the export job
          example: complete
        valid_until:
          type: string
          format: date-time
          description: Expiration time for the complete export job contents
          example: 2019-01-01 00:00:00
    ExportJobsHalResponse:
      type: object
      properties:
        _embedded:
          properties:
            jobs:
              type: array
              items:
                $ref: "#/components/schemas/ExportJob"
          description: A list of job objects
        _links:
          $ref: "#/components/schemas/Pagination"
        page:
          type: integer
        page_size:
          type: integer
        total_items:
          type: integer
        total_pages:
          type: integer
    ExportJobHalResponse:
      $ref: "#/components/schemas/ExportJob"
    Filters:
      type: object
      properties:
        extension:
          description: Filter records by extension number
          example: 999
          type: string
        start:lte:
          description: Filter records by start date (less than or equal to)
          example: "2019-01-01 00:00:00"
          type: string
        start:gte:
          description: Filter records by start date (greater than or equal to)
          example: "2019-01-01 00:00:00"
          type: string
        call_direction:
          description: Filter records by call direction
          example: INBOUND
          type: string
          enum:
            - INBOUND
            - OUTBOUND
            - INTRA_PBX
        caller_id:
          description: Filter records by Caller ID
          type: string
        cnam:
          description: Filter records by CNAM
          type: string
        dnis:
          description: Filter records by DNIS
          type: string
        duration:lte:
          description: Filter records by duration in milliseconds (less than or equal to)
          example: 60000
          type: integer
        duration:gte:
          description: Filter records by duration in milliseconds (greater than or equal to)
          example: 60000
          type: integer